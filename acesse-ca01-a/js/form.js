$(document).ready((function(){$("input[name='celular']").mask("(99) 9 9999-999?9"),$("input[name='cpf']").mask("999.999.999-99"),$("input[name='nome']").keyup((function(){this.value=this.value.replace(/[^A-Za-z]+/g," ")}))}));var cookieCodCampaign=getCookie("codCampaign")||null,codCampaign=$('input[name="origem"]').val().split("-");codCampaign[0]==cookieCodCampaign&&(window.location.href=$('input[name="destino"]').attr("value"));let xpromoEditada,getLocationSearch=window.location.search,urlParams=new URLSearchParams(getLocationSearch),menuLista=document.querySelector(".patrimony"),valorXpromo=urlParams.get("xpromo"),inputXpromo=document.querySelector(".xpromo");function setValue(e){switch(urlParams.delete("xpromo"),e){case"":default:xpromoEditada=valorXpromo.replace("LP","L0"),urlParams.set("xpromo",xpromoEditada),inputXpromo.setAttribute("value",xpromoEditada);break;case"0-50k":xpromoEditada=valorXpromo.replace("LP","L1"),urlParams.set("xpromo",xpromoEditada),inputXpromo.setAttribute("value",xpromoEditada);break;case"50k-100k":xpromoEditada=valorXpromo.replace("LP","L2"),urlParams.set("xpromo",xpromoEditada),inputXpromo.setAttribute("value",xpromoEditada);break;case"100k-300k":xpromoEditada=valorXpromo.replace("LP","L3"),urlParams.set("xpromo",xpromoEditada),inputXpromo.setAttribute("value",xpromoEditada);break;case"+300k":xpromoEditada=valorXpromo.replace("LP","L4"),urlParams.set("xpromo",xpromoEditada),inputXpromo.setAttribute("value",xpromoEditada)}}var email=getQueryVariable("email")||getQueryVariable("e")||getQueryVariable("kke");null!==email&&$("input[name='email']").val(atob(email));var origem=getQueryVariable("origem")||null;function validateFields(){var e=0;$('.form input[required]:not(input[name="email"])').map((function(){thisInput=$(this),$(thisInput).val()?$(thisInput).val()&&tooltip(thisInput,"remove",""):(tooltip(thisInput,"insert",""),e++),"cpf"==$(thisInput).attr("name")&&(valCPF=$(thisInput).val().replace(/[.-]+/g,""),0==validateCPF(valCPF)?(tooltip(thisInput,"insert","um CPF v√°lido n"),e++):tooltip(thisInput,"remove",""))})),console.log(e+" erro(s) no form"),0==e&&sendForm()}function sendForm(){setCookie("bRN",$('input[name="nome"').val(),30),setCookie("bRE",$('input[name="email"').val(),30),setCookie("bRC",$('input[name="cpf"').val(),30),setCookie("bRP",$('input[name="celular"').val(),30),urlParams.set("e",btoa($('input[name="email"').val()));var e={ddiTelefone:55,dddTelefone:parseInt($('input[name="celular"]').val().replace(/[()]/g,"").slice(0,2)),telefone:parseInt($('input[name="celular"]').val().replace(/[()' '-]/g,"").slice(2,$('input[name="celular"]').val().length))};if(console.log(e.dddTelefone),console.log(e.telefone),1==isNaN(e.telefone))a=NaN;else var a=e.ddiTelefone;console.log(a);var o={idEmail:$('input[name="idEmail"]').val(),nome:$('input[name="nome"]').val(),email:$('input[name="email"]').val(),ddiTelefone:a,dddTelefone:e.dddTelefone,telefone:e.telefone,origem:$('input[name="origem"]').val(),tags:{cpf:$('input[name="cpf"]').val(),xpromo:$('input[name="xpromo"]').val(),pag:$('input[name="origem"]').val(),vit_welcome:$('input[name="idEmail"]').val(),invest:$('select[name="invest"] option:selected').val(),patrimony:$('select[name="patrimony"] option:selected').val(),interest:$('select[name="interest"] option:selected').val()}};$.ajax({url:"https://api-dtvm.vitreo.com.br/marketing/central-preferencias/v1/lead",type:"POST",data:JSON.stringify(o),dataType:"json",contentType:"application/json;charset=UTF-8"}).done((function(e){console.log(e),console.log(e.hashPrivace),dataLayer.push({event:"EnvioFormularioSucesso"}),setCookie("l_Ic",e.hashPrivace,5e3),window.location.href=$('input[name="destino"]').val()+"?"+urlParams.toString(),console.log("envio do form")}))}function tooltip(e,a,o){var t=$(".form").find(".tooltip");"insert"==a&&0==t.length&&$('<div class="tooltip"><span></span><span>Preencha '+o+"este campo</span></div>").insertBefore($(e).parent("div")),"remove"==a&&0!==t.length&&$(e[0]).parent("div").prev(".tooltip").remove()}function validateCPF(e){var a,o;if(a=0,"00000000000"==e)return!1;for(i=1;i<=9;i++)a+=parseInt(e.substring(i-1,i))*(11-i);if(10!=(o=10*a%11)&&11!=o||(o=0),o!=parseInt(e.substring(9,10)))return!1;for(a=0,i=1;i<=10;i++)a+=parseInt(e.substring(i-1,i))*(12-i);return 10!=(o=10*a%11)&&11!=o||(o=0),o==parseInt(e.substring(10,11))}function getCookie(e){for(var a=e+"=",o=decodeURIComponent(document.cookie).split(";"),t=0;t<o.length;t++){for(var i=o[t];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(a))return i.substring(a.length,i.length)}return""}function setCookie(e,a,o){var t=new Date;t.setTime(t.getTime()+24*o*60*60*1e3);var i="expires="+t.toUTCString();document.cookie=e+"="+a+";"+i+";domain=.empiricusinvestimentos.com.br;path=/"}function getQueryVariable(e,a){a||(a=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(a);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}null!==origem&&""!==origem?$("input[name='origem']").val(origem):null!=origem&&""!=origem||(origem=$("input[name='origem']").val()),urlParams.set("origem",origem),$(".input-submit").click((function(){dataLayer.push({event:"cliqueBotaoLP"}),emailField=$('input[name="email"]'),regex=/^([a-z]){1,}([a-z0-9._-]){1,}([@]){1}([a-z]){2,}([.]){1}([a-z]){2,}([.]?){1}([a-z]?){2,}$/i,0==regex.test(emailField.val())?tooltip(emailField,"insert","corretamente "):(tooltip(emailField,"remove",""),validateFields())}));